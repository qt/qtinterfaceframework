#####################################################################
## BundledTagLib Generic Library:
#####################################################################

set(INCLUDE_DIRECTORIES
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ape>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/asf>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/flac>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/it>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mod>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mp4>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mpc>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mpeg>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mpeg/id3v1>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mpeg/id3v2>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/mpeg/id3v2/frames>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ogg>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ogg/flac>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ogg/opus>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ogg/speex>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/ogg/vorbis>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/riff>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/riff/aiff>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/riff/wav>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/s3m>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/toolkit>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/trueaudio>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/wavpack>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/taglib/xm>
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/taglib/3rdparty>
)

qt_internal_add_3rdparty_library(BundledTagLib
    QMAKE_LIB_NAME taglib
    SKIP_AUTOMOC
    INSTALL
    EXCEPTIONS
    SOURCES
        taglib/taglib/audioproperties.cpp
        taglib/taglib/tagutils.cpp
        taglib/taglib/mp4/mp4coverart.cpp
        taglib/taglib/mp4/mp4tag.cpp
        taglib/taglib/mp4/mp4file.cpp
        taglib/taglib/mp4/mp4properties.cpp
        taglib/taglib/mp4/mp4atom.cpp
        taglib/taglib/mp4/mp4item.cpp
        taglib/taglib/toolkit/tstring.cpp
        taglib/taglib/toolkit/tpropertymap.cpp
        taglib/taglib/toolkit/tbytevector.cpp
        taglib/taglib/toolkit/tbytevectorstream.cpp
        taglib/taglib/toolkit/tzlib.cpp
        taglib/taglib/toolkit/tstringlist.cpp
        taglib/taglib/toolkit/tiostream.cpp
        taglib/taglib/toolkit/tfilestream.cpp
        taglib/taglib/toolkit/trefcounter.cpp
        taglib/taglib/toolkit/tdebug.cpp
        taglib/taglib/toolkit/tbytevectorlist.cpp
        taglib/taglib/toolkit/tfile.cpp
        taglib/taglib/toolkit/tdebuglistener.cpp
        taglib/taglib/xm/xmfile.cpp
        taglib/taglib/xm/xmproperties.cpp
        taglib/taglib/wavpack/wavpackproperties.cpp
        taglib/taglib/wavpack/wavpackfile.cpp
        taglib/taglib/ape/apeproperties.cpp
        taglib/taglib/ape/apetag.cpp
        taglib/taglib/ape/apefile.cpp
        taglib/taglib/ape/apeitem.cpp
        taglib/taglib/ape/apefooter.cpp
        taglib/taglib/fileref.cpp
        taglib/taglib/asf/asftag.cpp
        taglib/taglib/asf/asffile.cpp
        taglib/taglib/asf/asfproperties.cpp
        taglib/taglib/asf/asfpicture.cpp
        taglib/taglib/asf/asfattribute.cpp
        taglib/taglib/it/itfile.cpp
        taglib/taglib/it/itproperties.cpp
        taglib/taglib/trueaudio/trueaudiofile.cpp
        taglib/taglib/trueaudio/trueaudioproperties.cpp
        taglib/taglib/s3m/s3mproperties.cpp
        taglib/taglib/s3m/s3mfile.cpp
        taglib/taglib/tagunion.cpp
        taglib/taglib/ogg/oggfile.cpp
        taglib/taglib/ogg/vorbis/vorbisfile.cpp
        taglib/taglib/ogg/vorbis/vorbisproperties.cpp
        taglib/taglib/ogg/oggpageheader.cpp
        taglib/taglib/ogg/speex/speexproperties.cpp
        taglib/taglib/ogg/speex/speexfile.cpp
        taglib/taglib/ogg/xiphcomment.cpp
        taglib/taglib/ogg/opus/opusproperties.cpp
        taglib/taglib/ogg/opus/opusfile.cpp
        taglib/taglib/ogg/oggpage.cpp
        taglib/taglib/ogg/flac/oggflacfile.cpp
        taglib/taglib/mpc/mpcfile.cpp
        taglib/taglib/mpc/mpcproperties.cpp
        taglib/taglib/flac/flacunknownmetadatablock.cpp
        taglib/taglib/flac/flacmetadatablock.cpp
        taglib/taglib/flac/flacpicture.cpp
        taglib/taglib/flac/flacproperties.cpp
        taglib/taglib/flac/flacfile.cpp
        taglib/taglib/mod/modfile.cpp
        taglib/taglib/mod/modtag.cpp
        taglib/taglib/mod/modfilebase.cpp
        taglib/taglib/mod/modproperties.cpp
        taglib/taglib/tag.cpp
        taglib/taglib/riff/rifffile.cpp
        taglib/taglib/riff/aiff/aifffile.cpp
        taglib/taglib/riff/aiff/aiffproperties.cpp
        taglib/taglib/riff/wav/wavfile.cpp
        taglib/taglib/riff/wav/infotag.cpp
        taglib/taglib/riff/wav/wavproperties.cpp
        taglib/taglib/mpeg/mpegproperties.cpp
        taglib/taglib/mpeg/id3v1/id3v1tag.cpp
        taglib/taglib/mpeg/id3v1/id3v1genres.cpp
        taglib/taglib/mpeg/mpegheader.cpp
        taglib/taglib/mpeg/mpegfile.cpp
        taglib/taglib/mpeg/id3v2/id3v2synchdata.cpp
        taglib/taglib/mpeg/id3v2/id3v2tag.cpp
        taglib/taglib/mpeg/id3v2/id3v2framefactory.cpp
        taglib/taglib/mpeg/id3v2/id3v2extendedheader.cpp
        taglib/taglib/mpeg/id3v2/frames/relativevolumeframe.cpp
        taglib/taglib/mpeg/id3v2/frames/generalencapsulatedobjectframe.cpp
        taglib/taglib/mpeg/id3v2/frames/chapterframe.cpp
        taglib/taglib/mpeg/id3v2/frames/unsynchronizedlyricsframe.cpp
        taglib/taglib/mpeg/id3v2/frames/urllinkframe.cpp
        taglib/taglib/mpeg/id3v2/frames/eventtimingcodesframe.cpp
        taglib/taglib/mpeg/id3v2/frames/uniquefileidentifierframe.cpp
        taglib/taglib/mpeg/id3v2/frames/popularimeterframe.cpp
        taglib/taglib/mpeg/id3v2/frames/tableofcontentsframe.cpp
        taglib/taglib/mpeg/id3v2/frames/ownershipframe.cpp
        taglib/taglib/mpeg/id3v2/frames/textidentificationframe.cpp
        taglib/taglib/mpeg/id3v2/frames/privateframe.cpp
        taglib/taglib/mpeg/id3v2/frames/attachedpictureframe.cpp
        taglib/taglib/mpeg/id3v2/frames/commentsframe.cpp
        taglib/taglib/mpeg/id3v2/frames/synchronizedlyricsframe.cpp
        taglib/taglib/mpeg/id3v2/frames/podcastframe.cpp
        taglib/taglib/mpeg/id3v2/frames/unknownframe.cpp
        taglib/taglib/mpeg/id3v2/id3v2header.cpp
        taglib/taglib/mpeg/id3v2/id3v2frame.cpp
        taglib/taglib/mpeg/id3v2/id3v2footer.cpp
        taglib/taglib/mpeg/xingheader.cpp
    DEFINES
        PNG_ARM_NEON_OPT=0
        PNG_POWERPC_VSX_OPT=0
        MAKE_TAGLIB_LIB
    PUBLIC_INCLUDE_DIRECTORIES
        ${INCLUDE_DIRECTORIES}
)
qt_disable_warnings(BundledTagLib)
qt_set_symbol_visibility_hidden(BundledTagLib)

qt_internal_extend_target(BundledTagLib CONDITION UNIX
    PUBLIC_DEFINES
        HAVE_GCC_ATOMIC=1
)

qt_internal_extend_target(BundledTagLib CONDITION WIN32
    PUBLIC_DEFINES
        HAVE_WIN_ATOMIC=1
)

qt_internal_extend_target(BundledTagLib CONDITION APPLE
    PUBLIC_DEFINES
        HAVE_MAC_ATOMIC=1
)

target_include_directories(BundledTagLib SYSTEM PUBLIC ${INCLUDE_DIRECTORIES})
